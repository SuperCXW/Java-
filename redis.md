# redis


# 锁
- https://www.cnblogs.com/niceyoo/p/13711149.html
- setnx
- lua脚本
- redisson
    - 可重入
    - 公平锁,
    - 连锁
        - 基于Redis的分布式RedissonMultiLock对象将多个RLock对象分组，并将它们作为一个锁处理。每个RLock对象可能属于不同的Redisson实例。
    - 红锁
        - 为了解决主从同步问题还有脑裂问题,引入redlock
        - 假设有5个redis节点，这些节点之间既没有主从，也没有集群关系。客户端用相同的key和随机值在5个节点上请求锁，请求锁的超时时间应小于锁自动释放时间。当在3个（超过半数）redis上请求到锁的时候，才算是真正获取到了锁。如果没有获取到锁，则把部分已锁的redis释放掉。
    - 读写锁
    - Semaphore

# 数据结构  
   -  sds 动态字符串  
   - 不以/0结尾,单独记录可用可用空间和剩余空间
   - 容易获取长度
   - 杜绝缓冲期溢出
   - 惰性释放空间,减少内存重分配
   - 二进制安全,不会被/0截断
   - 兼容部分C函数



# 布隆过滤器 
- 实际上是一个很长的二进制向量和一些列随机映射函数，布隆过滤器可以用于检索一个元素是否在一个集合中。他的优点是空间效率和查询时间都比一般的算法好很多，缺点是有一定的误识别率和删除困难
- 根据定义，布隆过滤器可以检查值是"可能在集合中"还是"绝对不在集合中" 可能，表示有一定的概率，也就是有误判率  如果不在，一定不在；如果在，有可能是hash碰撞，其实是不在的，发生了误判
- 多个hash函数结果，填入一个长度为m的位向量或位列表 0000000
 一个值放进来，多个hash函数计算未知，写入向量
 查找时，计算向量，然后看向量中是否存在，存在就有可能在，不存在一定不在